---
import PageLayout from '../../../layouts/PageLayout.astro';
import { useTranslations } from '../../../i18n/utils';
import ResearchCategoryCalculator from '../../../components/calculators/ResearchCategoryCalculator';

// Import all research category data
import allianceRecognition from '../../../data/research/alliance-recognition.json';
import unitSpecialTraining from '../../../data/research/unit-special-training.json';
import fullyArmedAlliance from '../../../data/research/fully-armed-alliance.json';
import field from '../../../data/research/field.json';
import heroTraining from '../../../data/research/hero-training.json';
import militaryStrategies from '../../../data/research/military-strategies.json';
import peaceShield from '../../../data/research/peace-shield.json';
import siegeToSeize from '../../../data/research/siege-to-seize.json';

export function getStaticPaths() {
  const categoryIds = [
    'alliance_recognition',
    'unit_special_training',
    'fully_armed_alliance',
    'field',
    'hero_training',
    'military_strategies',
    'peace_shield',
    'siege_to_seize'
  ];
  return categoryIds.map((categoryId) => ({
    params: { categoryId },
  }));
}

// Map category data by ID
const researchDataMap: Record<string, any> = {
  alliance_recognition: allianceRecognition,
  unit_special_training: unitSpecialTraining,
  fully_armed_alliance: fullyArmedAlliance,
  field: field,
  hero_training: heroTraining,
  military_strategies: militaryStrategies,
  peace_shield: peaceShield,
  siege_to_seize: siegeToSeize,
};

const { categoryId } = Astro.params;
const t = useTranslations('de');

const category = researchDataMap[categoryId];

if (!category) {
  return Astro.redirect('/tools/research');
}
---

<PageLayout title={`${category.name.de} - Wild Hoggs`} description={`Berechne Badge-Kosten für ${category.name.de}`}>
  <div style="margin-bottom: 1rem;">
    <a href="/tools/research" class="back-link">← Zurück zur Übersicht</a>
  </div>

  <ResearchCategoryCalculator categoryId={categoryId} lang="de" client:load />
</PageLayout>

<style>
  .page-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .back-link {
    display: inline-block;
    margin-bottom: 1rem;
    color: #ffa500;
    text-decoration: none;
    font-size: 0.95rem;
    transition: color 0.3s ease;
  }

  .back-link:hover {
    color: #ff8c00;
  }

  h1 {
    font-size: 2.5rem;
    color: #ffa500;
    margin-bottom: 0.5rem;
  }

  .subtitle {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.7);
  }

  @media (max-width: 768px) {
    h1 {
      font-size: 2rem;
    }

    .subtitle {
      font-size: 1rem;
    }
  }
</style>
